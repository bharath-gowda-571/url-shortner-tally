{"ast":null,"code":"import _asyncToGenerator from \"D:/Angular projects/iplversus_website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet BatsVsTeamDetailsComponent = class BatsVsTeamDetailsComponent {\n  constructor(route, _playerService) {\n    this.route = route;\n    this._playerService = _playerService;\n    this.loading = true;\n    this.batVTeamData = [];\n    this.nvr_fcd_off = false;\n    this.data_each_year = {};\n    this.data_by_match = {};\n    this.inngs_arr = [];\n    this.runs = 0;\n    this.fours = 0;\n    this.sixes = 0;\n    this.balls = 0;\n    this.h_score = 0;\n    this.ducks = 0;\n    this.thirties = 0;\n    this.fifties = 0;\n    this.hundreds = 0;\n    this.innings = 0;\n    this.bat_pos = [];\n    this.dissmissals = 0;\n    this.bat_avg = 0;\n    this.strike_rate = 0;\n    this.sr_chart_data = [];\n    this.ba_chart_data = [];\n    this.lineChartLabels1 = [];\n    this.lineChart1Options = {\n      responsive: true,\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero: true\n          }\n        }]\n      }\n    };\n    this.lineChartLabels = [];\n    this.lineChart1Type = 'line';\n    this.lineChart1Legend = true;\n    this.lineChart1Plugins = [];\n    this.lineChart1Data = [{\n      data: this.ba_chart_data,\n      label: 'Batting Average'\n    }];\n    this.chart_or_data1 = true;\n    this.chartTabClass1 = \"nav-link active\";\n    this.dataTabClass1 = \"nav-link\";\n    this.lineChart2Options = {\n      responsive: true,\n      scales: {\n        yAxes: [{\n          ticks: {\n            beginAtZero: true\n          }\n        }]\n      }\n    };\n    this.lineChart2Type = 'line';\n    this.lineChart2Legend = true;\n    this.lineChart2Plugins = [];\n    this.lineChart2Data = [{\n      data: this.sr_chart_data,\n      label: 'Strike Rate'\n    }];\n    this.chart_or_data2 = true;\n    this.chartTabClass2 = \"nav-link active\";\n    this.dataTabClass2 = \"nav-link\";\n    this.currentYearIndex = 0;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.batsman = _this.route.snapshot.paramMap.get(\"batsman\");\n      _this.team = _this.route.snapshot.paramMap.get(\"team\");\n      _this.batVTeamData = yield _this._playerService.getBatsmanVsTeamData(_this.batsman, _this.team);\n      _this.loading = false;\n\n      if (_this.batVTeamData == null) {\n        _this.nvr_fcd_off = true;\n        return;\n      }\n\n      for (var data of _this.batVTeamData) {\n        if (_this.data_each_year[data.year] == undefined) {\n          _this.data_each_year[data.year] = {\n            runs: 0,\n            balls: 0,\n            strike_rate: 0,\n            bat_avg: \"player was never out\",\n            matches: [],\n            fours: 0,\n            sixes: 0,\n            dissmissals: 0,\n            h_score: 0,\n            bat_pos: [],\n            ducks: 0,\n            thirties: 0,\n            fifties: 0,\n            hundreds: 0\n          };\n          _this.lineChartLabels = _this.push_in_sorted_order(_this.lineChartLabels, data.year);\n          _this.lineChartLabels1 = _this.push_in_sorted_order(_this.lineChartLabels1, data.year);\n        } // checking if match id is in data_by_match\n\n\n        if (_this.data_by_match[data.match_id] == undefined) {\n          _this.data_each_year[data.year].matches.push(data.match_id);\n\n          _this.inngs_arr.push(data.match_id);\n\n          _this.data_by_match[data.match_id] = {\n            runs: 0,\n            balls: 0,\n            strike_rate: 0\n          };\n        } //innings\n\n\n        _this.innings++;\n\n        _this.data_each_year[data.year].matches.push(data.match_id); //runs\n\n\n        _this.runs += data.runs;\n        _this.data_each_year[data.year].runs += data.runs;\n        if (data.runs > _this.h_score) _this.h_score = data.runs;\n\n        if (data.runs == 0) {\n          _this.ducks++;\n          _this.data_each_year[data.year].ducks++;\n        }\n\n        if (data.runs > 100) {\n          _this.hundreds++;\n          _this.data_each_year[data.year].hundreds++;\n        }\n\n        if (data.runs > 50 && data.runs < 100) {\n          _this.fifties++;\n          _this.data_each_year[data.year].fifties++;\n        }\n\n        if (data.runs > 30 && data.runs < 50) {\n          _this.thirties++;\n          _this.data_each_year[data.year].thirties++;\n        } //fours\n\n\n        _this.fours += data.fours;\n        _this.data_each_year[data.year].fours += data.fours; //sixes\n\n        _this.sixes += data.sixes;\n        _this.data_each_year[data.year].sixes += data.sixes; //balls\n\n        _this.balls += data.balls;\n        _this.data_each_year[data.year].balls += data.balls; //batpositions\n\n        !_this.bat_pos.includes(data.position) ? _this.bat_pos.push(data.position) : null;\n        !_this.data_each_year[data.year].bat_pos.includes(data.position) ? _this.data_each_year[data.year].bat_pos.push(data.position) : null; //strikerate\n\n        _this.data_each_year[data.year].strike_rate = (_this.data_each_year[data.year].runs / _this.data_each_year[data.year].balls * 100).toFixed(2); //dismissals\n\n        if (data.status == \"out\") {\n          _this.dissmissals++;\n          _this.data_each_year[data.year].dissmissals++;\n        } //batting average\n\n\n        if (_this.data_each_year[data.year].dissmissals != 0) {\n          _this.data_each_year[data.year].bat_avg = (_this.data_each_year[data.year].runs / _this.data_each_year[data.year].dissmissals).toFixed(2);\n        }\n      }\n\n      if (_this.dissmissals != 0) _this.bat_avg = (_this.runs / _this.dissmissals).toFixed(2);else {\n        _this.bat_avg = \"he was never out\";\n      }\n      _this.strike_rate = (_this.runs / _this.balls * 100).toFixed(2);\n\n      _this.bat_avg_problem(_this.lineChartLabels1, 0);\n\n      for (var i of _this.lineChartLabels) _this.sr_chart_data.push(_this.data_each_year[i].strike_rate);\n\n      for (var i of _this.lineChartLabels1) _this.ba_chart_data.push(_this.data_each_year[i].bat_avg); //console.log(this.lineChartLabels1);\n\n\n      console.log(_this.bat_pos);\n      _this.yearTabsStyles = Array(_this.lineChartLabels.length).fill(\"nav-link\");\n      _this.yearTabsStyles[1] = \"nav-link active\";\n    })();\n  }\n\n  bat_avg_problem(arr, i) {\n    if (i == this.lineChartLabels1.length) {\n      return;\n    }\n\n    const year = this.lineChartLabels1[i];\n\n    if (this.data_each_year[year].dissmissals == 0) {\n      this.lineChartLabels1.splice(i, 1);\n    }\n\n    this.bat_avg_problem(this.lineChartLabels1, i + 1);\n  }\n\n  push_in_sorted_order(arr, year) {\n    if (arr.length == 0 || year > arr[arr.length - 1]) {\n      arr.push(year);\n      return arr;\n    }\n\n    for (var i = 0; i <= arr.length - 1; i++) {\n      if (arr[i] > year) {\n        arr.splice(i, 0, year);\n        return arr;\n      }\n    }\n\n    return arr;\n  }\n\n  changeChartOrData1(choice) {\n    if (choice == \"chart\") {\n      this.chart_or_data1 = true;\n      this.chartTabClass1 = \"nav-link active\";\n      this.dataTabClass1 = \"nav-link\";\n    } else if (choice == \"data\") {\n      this.chart_or_data1 = false;\n      this.dataTabClass1 = \"nav-link active\";\n      this.chartTabClass1 = \"nav-link\";\n    }\n  }\n\n  changeChartOrData2(choice) {\n    if (choice == \"chart\") {\n      this.chart_or_data2 = true;\n      this.chartTabClass2 = \"nav-link active\";\n      this.dataTabClass2 = \"nav-link\";\n    } else if (choice == \"data\") {\n      this.chart_or_data2 = false;\n      this.dataTabClass2 = \"nav-link active\";\n      this.chartTabClass2 = \"nav-link\";\n    }\n  }\n\n  switchYear(yearIndex) {\n    this.yearTabsStyles[this.currentYearIndex] = \"nav-link\";\n    this.currentYearIndex = yearIndex;\n    this.yearTabsStyles[this.currentYearIndex] = \"nav-link active\";\n  }\n\n};\nBatsVsTeamDetailsComponent = __decorate([Component({\n  selector: 'app-bats-vs-team-details',\n  templateUrl: './bats-vs-team-details.component.html',\n  styleUrls: ['./bats-vs-team-details.component.scss']\n})], BatsVsTeamDetailsComponent);\nexport { BatsVsTeamDetailsComponent };","map":{"version":3,"sources":["D:\\Angular projects\\iplversus_website\\src\\app\\components\\bats-vs-team-details\\bats-vs-team-details.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ChartDataSets, ChartOptions, ChartType } from 'chart.js';\r\nimport { batVTeam } from 'src/app/player_pop_names';\r\nimport { PlayersService } from 'src/app/services/players.service';\r\n\r\ninterface DataEachYear{\r\n  [year:string]:{\r\n    runs:number;\r\n    balls:number;\r\n    strike_rate:any;\r\n    bat_avg:any;\r\n    matches:string[];\r\n    fours:number;\r\n    sixes:number;\r\n    dissmissals:number;\r\n    h_score:number;\r\n    bat_pos:number[];\r\n    ducks:number;\r\n    thirties:number;\r\n    fifties:number;\r\n    hundreds:number;\r\n  }\r\n}\r\n\r\ninterface runs_balls_sr{\r\n  runs:number;\r\n  balls:number;\r\n  strike_rate:number;\r\n}\r\n\r\nexport interface IHash {\r\n  [match: string] : runs_balls_sr;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-bats-vs-team-details',\r\n  templateUrl: './bats-vs-team-details.component.html',\r\n  styleUrls: ['./bats-vs-team-details.component.scss']\r\n})\r\n\r\nexport class BatsVsTeamDetailsComponent implements OnInit {\r\n\r\n  public loading:boolean = true;\r\n  public yearTabsStyles!:string[];\r\n  public batsman!:any;\r\n  public team!:any;\r\n  public batVTeamData:batVTeam[]=[];\r\n  nvr_fcd_off: boolean = false;\r\n  data_each_year: DataEachYear={};\r\n  public data_by_match:IHash={};\r\n  inngs_arr:string[]=[];\r\n  runs: number = 0;\r\n  fours: number = 0;\r\n  sixes: number = 0;\r\n  balls: number = 0 ;\r\n  h_score: number = 0;\r\n  ducks: number = 0;\r\n  thirties: number = 0;\r\n  fifties: number = 0;\r\n  hundreds: number = 0;\r\n  innings: number = 0;\r\n  bat_pos: number[] = [];\r\n  dissmissals: number = 0;\r\n  bat_avg: any = 0;\r\n  strike_rate: any = 0;\r\n  sr_chart_data: any = [];\r\n  ba_chart_data: any = [];\r\n  lineChartLabels1: string[] = [];\r\n\r\n  constructor(private route:ActivatedRoute, private _playerService:PlayersService) { }\r\n\r\n  async ngOnInit(): Promise<void> {\r\n\r\n    this.batsman = this.route.snapshot.paramMap.get(\"batsman\")\r\n    this.team = this.route.snapshot.paramMap.get(\"team\")\r\n\r\n    this.batVTeamData = await this._playerService.getBatsmanVsTeamData(this.batsman,this.team);\r\n\r\n    this.loading = false\r\n    if(this.batVTeamData == null){\r\n      this.nvr_fcd_off =true\r\n      return\r\n    }\r\n\r\n    for(var data of this.batVTeamData){\r\n\r\n      if(this.data_each_year[data.year]==undefined){\r\n        this.data_each_year[data.year]=\r\n        {\r\n          runs:0,\r\n          balls:0,\r\n          strike_rate:0,\r\n          bat_avg:\"player was never out\",\r\n          matches:[],\r\n          fours:0,\r\n          sixes:0,\r\n          dissmissals:0,\r\n          h_score:0,\r\n          bat_pos:[],\r\n          ducks:0,\r\n          thirties:0,\r\n          fifties:0,\r\n          hundreds:0\r\n        }\r\n\r\n        this.lineChartLabels = this.push_in_sorted_order(this.lineChartLabels, data.year)\r\n        this.lineChartLabels1 = this.push_in_sorted_order(this.lineChartLabels1, data.year)\r\n      }\r\n\r\n      // checking if match id is in data_by_match\r\n      if(this.data_by_match[data.match_id]==undefined){\r\n        this.data_each_year[data.year].matches.push(data.match_id)\r\n        this.inngs_arr.push(data.match_id)\r\n        this.data_by_match[data.match_id]={\r\n          runs:0,\r\n          balls:0,\r\n          strike_rate:0\r\n        }\r\n      }\r\n      //innings\r\n      this.innings++;\r\n      this.data_each_year[data.year].matches.push(data.match_id);\r\n\r\n      //runs\r\n      this.runs += data.runs;\r\n      this.data_each_year[data.year].runs += data.runs;\r\n      if(data.runs>this.h_score)\r\n        this.h_score = data.runs;\r\n      if(data.runs==0){\r\n        this.ducks++;\r\n        this.data_each_year[data.year].ducks++;\r\n      }\r\n      if(data.runs>100){\r\n        this.hundreds++;\r\n        this.data_each_year[data.year].hundreds++;\r\n      }\r\n      if(data.runs>50 && data.runs<100){\r\n        this.fifties++;\r\n        this.data_each_year[data.year].fifties++;\r\n      }\r\n      if(data.runs>30 && data.runs<50){\r\n        this.thirties++;\r\n        this.data_each_year[data.year].thirties++;\r\n      }\r\n\r\n      //fours\r\n      this.fours += data.fours;\r\n      this.data_each_year[data.year].fours += data.fours;\r\n\r\n      //sixes\r\n      this.sixes += data.sixes;\r\n      this.data_each_year[data.year].sixes += data.sixes;\r\n\r\n      //balls\r\n      this.balls += data.balls;\r\n      this.data_each_year[data.year].balls += data.balls;\r\n\r\n      //batpositions\r\n      !this.bat_pos.includes(data.position)? this.bat_pos.push(data.position): null;\r\n      !this.data_each_year[data.year].bat_pos.includes(data.position)? this.data_each_year[data.year].bat_pos.push(data.position): null;\r\n\r\n      //strikerate\r\n      this.data_each_year[data.year].strike_rate = ((this.data_each_year[data.year].runs/this.data_each_year[data.year].balls)*100).toFixed(2);\r\n      \r\n      //dismissals\r\n      if(data.status == \"out\"){\r\n        this.dissmissals++;\r\n        this.data_each_year[data.year].dissmissals++;\r\n      }\r\n\r\n      //batting average\r\n      if(this.data_each_year[data.year].dissmissals!=0){\r\n        this.data_each_year[data.year].bat_avg = (this.data_each_year[data.year].runs/this.data_each_year[data.year].dissmissals).toFixed(2);\r\n      }\r\n    }\r\n\r\n    if(this.dissmissals != 0)\r\n      this.bat_avg = (this.runs/this.dissmissals).toFixed(2);\r\n    else{\r\n      this.bat_avg = \"he was never out\";\r\n    }\r\n\r\n    this.strike_rate = ((this.runs/this.balls)*100).toFixed(2);\r\n\r\n\r\n    this.bat_avg_problem(this.lineChartLabels1, 0);\r\n    for(var i of this.lineChartLabels)\r\n      this.sr_chart_data.push(this.data_each_year[i].strike_rate);\r\n    \r\n\r\n    for(var i of this.lineChartLabels1)\r\n      this.ba_chart_data.push(this.data_each_year[i].bat_avg);\r\n    //console.log(this.lineChartLabels1);\r\n    console.log(this.bat_pos);\r\n\r\n    this.yearTabsStyles=Array(this.lineChartLabels.length).fill(\"nav-link\")\r\n    this.yearTabsStyles[1]=\"nav-link active\"\r\n  }\r\n\r\n  bat_avg_problem(arr: string[], i: number){\r\n\r\n    if(i==this.lineChartLabels1.length){\r\n      return;\r\n    }\r\n    const year = this.lineChartLabels1[i];\r\n    if(this.data_each_year[year].dissmissals==0){\r\n      this.lineChartLabels1.splice(i, 1);\r\n    }\r\n    this.bat_avg_problem(this.lineChartLabels1, i+1);\r\n  }\r\n\r\n  push_in_sorted_order(arr: string[], year: string): string[] {\r\n    \r\n    if(arr.length==0 || year>arr[arr.length-1]){\r\n      arr.push(year)\r\n      return arr\r\n    }\r\n\r\n    for(var i=0;i<=arr.length-1;i++){\r\n      if(arr[i]>year){\r\n        arr.splice(i,0,year);\r\n        return arr;\r\n      }\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  \r\n\r\n  public lineChart1Options: ChartOptions = {\r\n    responsive: true,\r\n    scales: {\r\n      yAxes: [{\r\n          ticks: {\r\n              beginAtZero:true\r\n          }\r\n      }]\r\n    }\r\n  };\r\n\r\n  public lineChartLabels: string[] = [];\r\n  public lineChart1Type: ChartType = 'line';\r\n  public lineChart1Legend = true;\r\n  public lineChart1Plugins = [];\r\n  public lineChart1Data: ChartDataSets[] = [\r\n    { data: this.ba_chart_data, label: 'Batting Average' }\r\n  ];\r\n\r\n  public chart_or_data1=true\r\n  public chartTabClass1 = \"nav-link active\"\r\n  public dataTabClass1 =\"nav-link\"\r\n\r\n  changeChartOrData1(choice:String){\r\n    if(choice==\"chart\"){\r\n      this.chart_or_data1 = true\r\n      this.chartTabClass1 = \"nav-link active\"\r\n      this.dataTabClass1=\"nav-link\"\r\n    }\r\n    else if(choice==\"data\"){\r\n      this.chart_or_data1=false\r\n      this.dataTabClass1=\"nav-link active\"\r\n      this.chartTabClass1=\"nav-link\"\r\n    }\r\n  }\r\n\r\n  public lineChart2Options: ChartOptions = {\r\n    responsive: true,\r\n    scales: {\r\n      yAxes: [{\r\n          ticks: {\r\n              beginAtZero:true\r\n          }\r\n      }]\r\n    }\r\n  };\r\n\r\n  public lineChart2Type: ChartType = 'line';\r\n  public lineChart2Legend = true;\r\n  public lineChart2Plugins = [];\r\n  public lineChart2Data: ChartDataSets[] = [\r\n    { data: this.sr_chart_data, label: 'Strike Rate' }\r\n  ];\r\n\r\n  public chart_or_data2=true\r\n  public chartTabClass2 = \"nav-link active\"\r\n  public dataTabClass2 =\"nav-link\"\r\n\r\n  changeChartOrData2(choice:String){\r\n    if(choice==\"chart\"){\r\n      this.chart_or_data2 = true\r\n      this.chartTabClass2 = \"nav-link active\"\r\n      this.dataTabClass2=\"nav-link\"\r\n    }\r\n    else if(choice==\"data\"){\r\n      this.chart_or_data2=false\r\n      this.dataTabClass2=\"nav-link active\"\r\n      this.chartTabClass2=\"nav-link\"\r\n    }\r\n  }\r\n\r\n  public currentYearIndex=0;\r\n\r\n  switchYear(yearIndex:number){\r\n    this.yearTabsStyles[this.currentYearIndex] = \"nav-link\"\r\n    this.currentYearIndex = yearIndex;\r\n    this.yearTabsStyles[this.currentYearIndex] = \"nav-link active\"\r\n  }\r\n  \r\n}\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}