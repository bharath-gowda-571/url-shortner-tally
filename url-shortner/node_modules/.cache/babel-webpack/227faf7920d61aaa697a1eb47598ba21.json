{"ast":null,"code":"import _asyncToGenerator from \"D:/Angular projects/url_shortener/url-shortner-tally/url-shortner/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { getAuth } from 'firebase/auth';\nlet FirebaseAuthService = class FirebaseAuthService {\n  constructor(firebaseAuth, _http) {\n    this.firebaseAuth = firebaseAuth;\n    this._http = _http;\n    this.isLoggedIn = false;\n  }\n\n  signin(email, password) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var error_msg = \"\";\n      yield _this.firebaseAuth.signInWithEmailAndPassword(email, password).then(res => {\n        console.log(res);\n        _this.isLoggedIn = true;\n        localStorage.setItem('user', JSON.stringify(res.user));\n      }).catch(e => {\n        error_msg = \"Wrong Email or Password\";\n      });\n      return error_msg;\n    })();\n  }\n\n  signup(email, password, first_name, last_name) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var error_msg = \"\";\n      yield _this2.firebaseAuth.createUserWithEmailAndPassword(email, password).then(res => {\n        _this2.isLoggedIn = true;\n        localStorage.setItem('user', JSON.stringify(res.user));\n        const auth = getAuth();\n        const user = auth.currentUser;\n        var uid = user === null || user === void 0 ? void 0 : user.uid;\n        console.log(uid);\n\n        _this2._http.put(\"https://url-shortner-418d4-default-rtdb.asia-southeast1.firebasedatabase.app/users/\" + uid + \".json\", {\n          \"first_name\": first_name,\n          \"last name\": last_name\n        }).subscribe(data => {});\n      }).catch(e => {\n        var e_str = e.toString();\n\n        if (e_str.search(\"email-already-in-use\") != -1) {\n          error_msg = \"User already exists\";\n        } else if (e_str.search(\"invalid-email\") != -1) {\n          error_msg = \"Invalid Email\";\n        } else if (e_str.search(\"weak-password\") != -1) {\n          error_msg = \"Weak Password\";\n        }\n\n        return error_msg;\n      });\n      return error_msg;\n    })();\n  }\n\n  logout() {\n    this.firebaseAuth.signOut();\n    localStorage.removeItem('user');\n  }\n\n  getUserName(uid) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(uid);\n      var first_name = yield _this3._http.get(\"https://url-shortner-418d4-default-rtdb.asia-southeast1.firebasedatabase.app/users/\" + uid.toString() + \"/first_name.json\").toPromise();\n      var last_name = yield _this3._http.get(\"https://url-shortner-418d4-default-rtdb.asia-southeast1.firebasedatabase.app/users/\" + uid.toString() + \"/last name.json\").toPromise(); // print(first_name)\n\n      console.log(first_name);\n      return first_name + \" \" + last_name;\n    })();\n  }\n\n};\nFirebaseAuthService = __decorate([Injectable({\n  providedIn: 'root'\n})], FirebaseAuthService);\nexport { FirebaseAuthService };","map":{"version":3,"sources":["D:/Angular projects/url_shortener/url-shortner-tally/url-shortner/src/app/services/firebase-auth.service.ts"],"names":["__decorate","Injectable","getAuth","FirebaseAuthService","constructor","firebaseAuth","_http","isLoggedIn","signin","email","password","error_msg","signInWithEmailAndPassword","then","res","console","log","localStorage","setItem","JSON","stringify","user","catch","e","signup","first_name","last_name","createUserWithEmailAndPassword","auth","currentUser","uid","put","subscribe","data","e_str","toString","search","logout","signOut","removeItem","getUserName","get","toPromise","providedIn"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Injectable } from '@angular/core';\r\nimport { getAuth } from 'firebase/auth';\r\nlet FirebaseAuthService = class FirebaseAuthService {\r\n    constructor(firebaseAuth, _http) {\r\n        this.firebaseAuth = firebaseAuth;\r\n        this._http = _http;\r\n        this.isLoggedIn = false;\r\n    }\r\n    async signin(email, password) {\r\n        var error_msg = \"\";\r\n        await this.firebaseAuth.signInWithEmailAndPassword(email, password).then(res => {\r\n            console.log(res);\r\n            this.isLoggedIn = true;\r\n            localStorage.setItem('user', JSON.stringify(res.user));\r\n        }).catch(e => {\r\n            error_msg = \"Wrong Email or Password\";\r\n        });\r\n        return error_msg;\r\n    }\r\n    async signup(email, password, first_name, last_name) {\r\n        var error_msg = \"\";\r\n        await this.firebaseAuth.createUserWithEmailAndPassword(email, password).then(res => {\r\n            this.isLoggedIn = true;\r\n            localStorage.setItem('user', JSON.stringify(res.user));\r\n            const auth = getAuth();\r\n            const user = auth.currentUser;\r\n            var uid = user === null || user === void 0 ? void 0 : user.uid;\r\n            console.log(uid);\r\n            this._http.put(\"https://url-shortner-418d4-default-rtdb.asia-southeast1.firebasedatabase.app/users/\" + uid + \".json\", { \"first_name\": first_name, \"last name\": last_name }).subscribe(data => {\r\n            });\r\n        }).catch(e => {\r\n            var e_str = e.toString();\r\n            if (e_str.search(\"email-already-in-use\") != -1) {\r\n                error_msg = \"User already exists\";\r\n            }\r\n            else if (e_str.search(\"invalid-email\") != -1) {\r\n                error_msg = \"Invalid Email\";\r\n            }\r\n            else if (e_str.search(\"weak-password\") != -1) {\r\n                error_msg = \"Weak Password\";\r\n            }\r\n            return error_msg;\r\n        });\r\n        return error_msg;\r\n    }\r\n    logout() {\r\n        this.firebaseAuth.signOut();\r\n        localStorage.removeItem('user');\r\n    }\r\n    async getUserName(uid) {\r\n        console.log(uid);\r\n        var first_name = await this._http.get(\"https://url-shortner-418d4-default-rtdb.asia-southeast1.firebasedatabase.app/users/\" + uid.toString() + \"/first_name.json\").toPromise();\r\n        var last_name = await this._http.get(\"https://url-shortner-418d4-default-rtdb.asia-southeast1.firebasedatabase.app/users/\" + uid.toString() + \"/last name.json\").toPromise();\r\n        // print(first_name)\r\n        console.log(first_name);\r\n        return first_name + \" \" + last_name;\r\n    }\r\n};\r\nFirebaseAuthService = __decorate([\r\n    Injectable({\r\n        providedIn: 'root'\r\n    })\r\n], FirebaseAuthService);\r\nexport { FirebaseAuthService };\r\n"]},"metadata":{},"sourceType":"module"}