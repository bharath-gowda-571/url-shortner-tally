{"ast":null,"code":"import _asyncToGenerator from \"/home/bharath/Desktop/drive2/tally-hackathon/url-shortner/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { NgxQrcodeElementTypes, NgxQrcodeErrorCorrectionLevels } from '@techiediaries/ngx-qrcode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/firebase-auth.service\";\nimport * as i3 from \"src/app/services/redirection.service\";\nimport * as i4 from \"src/app/services/logs.service\";\nimport * as i5 from \"../navbar/navbar.component\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"ngx-clipboard\";\nimport * as i8 from \"@techiediaries/ngx-qrcode\";\n\nfunction DashboardComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.error_msg);\n  }\n}\n\nfunction DashboardComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \"No Links Yet\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DashboardComponent_div_32_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"a\", 14);\n    i0.ɵɵelementStart(2, \"div\", 15);\n    i0.ɵɵelementStart(3, \"h5\", 16);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵelementStart(6, \"button\", 17);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(7, \"svg\", 18);\n    i0.ɵɵelement(8, \"path\", 19);\n    i0.ɵɵelement(9, \"path\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(10, \"a\", 21);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 22);\n    i0.ɵɵelementStart(13, \"div\", 23);\n    i0.ɵɵelement(14, \"ngx-qrcode\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 25);\n    i0.ɵɵelementStart(16, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_32_div_1_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const link_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.viewStats(link_r6[\"link\"]);\n    });\n    i0.ɵɵtext(17, \"View Stats\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_div_32_div_1_Template_button_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const link_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.delete_link(link_r6[\"link\"]);\n    });\n    i0.ɵɵtext(19, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const link_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"https://url-shortner-418d4.web.app/\", link_r6[\"link\"], \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"cbContent\", \"https://url-shortner-418d4.web.app/\" + link_r6[\"link\"]);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"href\", link_r6[\"fullink\"], i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(link_r6[\"fullink\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"elementType\", ctx_r5.elementType)(\"errorCorrectionLevel\", ctx_r5.correctionLevel)(\"value\", \"https://url-shortner-418d4.web.app/\" + link_r6[\"link\"]);\n  }\n}\n\nfunction DashboardComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, DashboardComponent_div_32_div_1_Template, 20, 7, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.links);\n  }\n}\n\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    constructor(router, firebaseService, _redirectionService, logsService) {\n      this.router = router;\n      this.firebaseService = firebaseService;\n      this._redirectionService = _redirectionService;\n      this.logsService = logsService;\n      this.keys_list = [];\n      this.small_link_value = \"\";\n      this.error_msg = \"\";\n      this.elementType = NgxQrcodeElementTypes.URL;\n      this.correctionLevel = NgxQrcodeErrorCorrectionLevels.HIGH;\n      this.no_links = false;\n    }\n\n    randomString(length) {\n      var randomChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      var result = '';\n\n      for (var i = 0; i < length; i++) {\n        result += randomChars.charAt(Math.floor(Math.random() * randomChars.length));\n      }\n\n      return result;\n    }\n\n    ngOnInit() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.logsService.getUserLocation();\n\n        if (localStorage.getItem(\"user\") === null) {\n          _this.router.navigate(['/']);\n        }\n\n        var Uid = localStorage.getItem(\"user\");\n\n        _this._redirectionService.getHisLinks(Uid).subscribe(data => {\n          _this.links = data;\n\n          if (_this.links == null) {\n            _this.no_links = true;\n          } else {\n            _this.links = _this.links.reverse();\n          }\n        });\n\n        _this.error_msg = \"\";\n        _this.small_link_value = \"\";\n\n        if (localStorage.getItem(\"user\") === null) {\n          _this.router.navigate(['/']);\n        } else {\n          _this.userfirstname = yield _this.firebaseService.getUserFirstName();\n          _this.keys = yield _this.firebaseService.getListofKeys();\n\n          for (var key of Object.keys(_this.keys)) {\n            _this.keys_list.push(key);\n          }\n\n          _this.keys_list = [..._this.keys_list, \"dashboard\", \"signup\", \"signin\", \"\"];\n        }\n      })();\n    }\n\n    shortenNewLink(small_url, long_link) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        if (long_link == \"\") {\n          _this2.error_msg = \"Link cannot be empty\";\n        } else if (small_url == \"\") {\n          _this2.error_msg = \"Link cannot be empty\";\n        } else if (_this2.keys_list.includes(small_url)) {\n          _this2.error_msg = \"Sorry, the link u have chosen already exists\";\n        } else {\n          yield _this2.firebaseService.add_new_link(small_url, long_link);\n          location.reload();\n        }\n      })();\n    }\n\n    generateRandomLink() {\n      var rand_str = this.randomString(8);\n\n      while (this.keys_list.includes(rand_str)) {\n        rand_str = this.randomString(8);\n      }\n\n      this.small_link_value = rand_str;\n    }\n\n    viewStats(key) {\n      this.router.navigate(['/viewstats', key]);\n    }\n\n    delete_link(key) {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        yield _this3.firebaseService.delete_link(key);\n        location.reload();\n      })();\n    }\n\n  }\n\n  DashboardComponent.ɵfac = function DashboardComponent_Factory(t) {\n    return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FirebaseAuthService), i0.ɵɵdirectiveInject(i3.RedirectionService), i0.ɵɵdirectiveInject(i4.LogsService));\n  };\n\n  DashboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DashboardComponent,\n    selectors: [[\"app-dashboard\"]],\n    decls: 33,\n    vars: 5,\n    consts: [[2, \"margin-left\", \"20px\"], [1, \"shortn_link\"], [1, \"spacer\"], [1, \"input-group\"], [1, \"input-group-text\"], [\"type\", \"text\", \"aria-label\", \"Full Link\", 1, \"form-control\"], [\"long_link\", \"\"], [\"type\", \"text\", \"aria-label\", \"Email\", \"placeholder\", \"choose a custom link\", 1, \"form-control\", 3, \"value\"], [\"small_link\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [4, \"ngIf\"], [\"style\", \"text-align: center;margin-top: 20px;\", 4, \"ngIf\"], [2, \"text-align\", \"center\", \"margin-top\", \"20px\"], [4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\", \"list-group-item-action\", \"flex-column\", \"align-items-start\"], [1, \"d-flex\", \"w-100\", \"justify-content-between\"], [1, \"mb-1\"], [\"ngxClipboard\", \"\", 1, \"button-style\", 3, \"cbContent\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"20\", \"height\", \"20\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-clipboard\"], [\"d\", \"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z\"], [\"d\", \"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z\"], [1, \"mb-1\", 2, \"font-style\", \"italic\", \"size\", \"10\", \"color\", \"blue\", 3, \"href\"], [1, \"row\"], [1, \"col-sm-6\"], [\"cssClass\", \"bshadow\", 3, \"elementType\", \"errorCorrectionLevel\", \"value\"], [1, \"col-sm-6\", \"buttons-class\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"btn-sm\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"btn-sm\", 2, \"margin-left\", \"10px\", 3, \"click\"]],\n    template: function DashboardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r10 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelement(0, \"app-navbar\");\n        i0.ɵɵelementStart(1, \"h1\", 0);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"hr\");\n        i0.ɵɵelementStart(4, \"div\", 1);\n        i0.ɵɵelementStart(5, \"h5\");\n        i0.ɵɵtext(6, \"Shorten a new link\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"div\", 2);\n        i0.ɵɵelementStart(8, \"div\", 3);\n        i0.ɵɵelementStart(9, \"span\", 4);\n        i0.ɵɵtext(10, \"Full Link\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"input\", 5, 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"div\", 2);\n        i0.ɵɵelementStart(14, \"div\", 3);\n        i0.ɵɵelementStart(15, \"span\", 4);\n        i0.ɵɵtext(16, \"Short Link\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"span\", 4);\n        i0.ɵɵtext(18, \"https://url-shortner-418d4.web.app/\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"input\", 7, 8);\n        i0.ɵɵelementStart(21, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_21_listener() {\n          return ctx.generateRandomLink();\n        });\n        i0.ɵɵtext(22, \"Choose Random\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"div\", 2);\n        i0.ɵɵtemplate(24, DashboardComponent_div_24_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelement(25, \"div\", 2);\n        i0.ɵɵelementStart(26, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_26_listener() {\n          i0.ɵɵrestoreView(_r10);\n\n          const _r1 = i0.ɵɵreference(20);\n\n          const _r0 = i0.ɵɵreference(12);\n\n          return ctx.shortenNewLink(_r1.value, _r0.value);\n        });\n        i0.ɵɵtext(27, \"Shorten Link\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"hr\");\n        i0.ɵɵelementStart(29, \"h3\", 0);\n        i0.ɵɵtext(30, \"Your Links\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(31, DashboardComponent_div_31_Template, 2, 0, \"div\", 11);\n        i0.ɵɵtemplate(32, DashboardComponent_div_32_Template, 2, 1, \"div\", 10);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Welcome \", ctx.userfirstname, \",\");\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"value\", ctx.small_link_value);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.error_msg != \"\");\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.no_links);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.no_links);\n      }\n    },\n    directives: [i5.NavbarComponent, i6.NgIf, i6.NgForOf, i7.ClipboardDirective, i8.QrcodeComponent],\n    styles: [\".shortn_link[_ngcontent-%COMP%]{width:500px;margin:auto;text-align:center;left:50%}.spacer[_ngcontent-%COMP%]{height:15px}.button-style[_ngcontent-%COMP%]{background-color:transparent;border:transparent}.buttons-class[_ngcontent-%COMP%]{margin-top:20px}.vert_spacer[_ngcontent-%COMP%]{width:30px}.qrdiv[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;width:40%}@media only screen and (max-width: 968px){.shortn_link[_ngcontent-%COMP%]{width:80vw}}\"]\n  });\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}